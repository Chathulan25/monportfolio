const translations = {
    fr: {
        // En-tête
        title: "Chathulan JEGATHEESWARAN", // Ajouté pour le document.title
        subtitle: "Technicien Support IT | Alternance 24 mois - Disponibilité immédiat",

        // Navigation
        nav_profil: "Mon Profil",
        nav_competences: "Compétences",
        nav_experiences: "Expériences",
        nav_formations: "Formations",
        nav_langues: "Langues",
        nav_interets: "Intérêts",
        nav_contact: "Contact",

        // Sections (Titres H2)
        sec_profil: "Mon Profil",
        sec_competences: "Compétences",
        sec_experiences: "Expériences Professionnelles",
        sec_formations: "Formations",
        sec_langues: "Langues",
        sec_interets: "Centres d'Intérêt",
        sec_contact: "Contact",

        // Profil
        profil_p1: "Actuellement en BTS SIO à l'école IFFP de Nanterre, je suis à la recherche d'une alternance de 24 mois pour un poste Technicien Support IT, je suis un jeune professionnel orienté vers la fiabilité des systèmes et l'excellence du service utilisateur, désireux de mettre mes connaissances techniques et mon sens du service à profit pour optimiser l'expérience de l'équipe et assurer une assistance rapide et efficace.",
        profil_highlight: "Rythme: 3 jours en entreprise / 2 jours en formation",

        // Savoir-Être (Compétences)
        soft_skills_title: "Savoir-Être",
        soft_skills_1: "Sens du service",
        soft_skills_2: "Esprit d’équipe et travail en équipe",
        soft_skills_3: "Esprit analytique et méthodique",
        soft_skills_4: "Rigueur",
        soft_skills_5: "Autonomie",

        // Savoir-Faire (Compétences)
        hard_skills_title: "Savoir-faire",
        tech_os: "OS & Virtualisation",
        tech_os_desc: "Windows 10/11, Linux, Debian",
        tech_prog: "Programmation & Développement",
        tech_prog_desc: "HTML, CSS, Javascript, Python",
        tech_db: "Base de données & Serveur",
        tech_db_desc: "MySQL, Apache, MAMP",
        tech_ticket: "Gestion de ticketing",
        tech_ticket_desc: "Unity, OPTIMIT, GLPI",
        tech_network: "Réseaux & Infrastructure",
        tech_network_desc: "Cisco Packet Tracer, IPv4, TCP/IP, Wireshark",
        tech_office: "Bureautique",
        tech_office_desc: "Office 365",
        tech_support: "Support",
        tech_support_desc: "Assistance technique et gestion des incidents",

        // Langues
        lang_bilingue: "Anglais: Bilingue",

        // Expériences
        exp1_title: "Technicien de proximité Informatique - CDD",
        exp1_company: "Société Générale, Fontenay-sous-Bois",
        exp1_task1: "Assurer le support N1 et la résolution d'incidents techniques.",
        exp1_task2: "Gérer les demandes d'assistance via l'outil de ticketing.",
        exp1_task3: "Installer, configurer et maintenir les postes de travail (Windows 10/11) et les périphériques.",
        exp1_task4: "Garantir le Maintien en Condition Opérationnelle (MCO) de l'environnement informatique.",

        exp2_title: "Développeur Web - Stage (6 semaines)",
        exp2_company: "CAPAUTO, Drancy",
        exp2_task1: "Concevoir un site vitrine en HTML, CSS et JavaScript en respectant le cahier des charges.",
        exp2_task2: "Optimiser l'aﬃchage responsive et l'interface du site web.",
        exp2_task3: "Contribuer à l'optimisation du référencement (SEO).",
        exp2_task4: "Tester et corriger les erreurs pour améliorer les performances de chargement.",

        exp3_title: "Technicien Informatique - Stage (5 semaines)",
        exp3_company: "GEODEAL, Bondy",
        exp3_task1: "Réinstaller et déployer le système d'exploitation Windows sur un lot de postes utilisateurs.",
        exp3_task2: "Démonter, nettoyer et entretenir les unités centrales.",
        exp3_task3: "Configurer et masteriser les tablettes Surface Pro.",

        // Formations
        form1_title: "BTS SIO option SISR en contrat d’apprentissage",
        form1_location: "IFFP, Nanterre",
        form2_title: "BTS Systèmes Numériques option IR",
        form2_location: "Lycée Le Corbusier, Aubervilliers (Non obtenu)",
        form3_title: "Baccalauréat Professionnel Systèmes Numériques",
        form3_location: "Lycée Alfred Costes, Bobigny",

        // Intérêts
        int_vg: "Jeux-vidéos: Développement de la stratégie, esprit d’équipe (en ligne).",
        int_muscu: "Musculation: Pratique régulière.",

        // Pied de page
        footer_note: "Portfolio de Chathulan JEGATHEESWARAN | © 2025",
        
        // Nom du lien de téléchargement
        cv_text: "CV",
    },
    en: {
        // En-tête
        title: "Chathulan JEGATHEESWARAN - My Portfolio", // Ajouté pour le document.title
        subtitle: "IT Support Technician | 24-month Apprenticeship -  Immediately Available",

        // Navigation
        nav_profil: "My Profile",
        nav_competences: "Skills",
        nav_experiences: "Experience",
        nav_formations: "Education",
        nav_langues: "Language",
        nav_interets: "Interests",
        nav_contact: "Contact",

        // Sections (Titres H2)
        sec_profil: "My Profile",
        sec_competences: "Skills",
        sec_experiences: "Professional Experience",
        sec_formations: "Education",
        sec_langues: "Language",
        sec_interets: "Interests",
        sec_contact: "Contact",

        // Profil
        profil_p1: "Currently enrolled in a BTS SIO (IT Services for Organizations) program at the IFFP school in Nanterre, I am actively seeking a 24-month apprenticeship for an IT Support Technician position. I am a young professional focused on system reliability and excellent user service, eager to leverage my technical knowledge and service orientation to optimize team experience and ensure fast and efficient support.",
        profil_highlight: "Schedule: 3 days in company / 2 days in training",

        // Savoir-Être (Compétences)
        soft_skills_title: "Soft Skills",
        soft_skills_1: "Customer Service Orientation",
        soft_skills_2: "Team spirit and teamwork",
        soft_skills_3: "Analytical and methodical mindset",
        soft_skills_4: "Rigor",
        soft_skills_5: "Autonomy",

        // Savoir-Faire (Compétences)
        hard_skills_title: "Hard Skills",
        tech_os: "OS & Virtualization",
        tech_os_desc: "Windows 10/11, Linux, Debian",
        tech_prog: "Programming & Development",
        tech_prog_desc: "HTML, CSS, Javascript, Python",
        tech_db: "Database & Server",
        tech_db_desc: "MySQL, Apache, MAMP",
        tech_ticket: "Ticketing Management",
        tech_ticket_desc: "Unity, OPTIMIT, GLPI",
        tech_network: "Network & Infrastructure",
        tech_network_desc: "Cisco Packet Tracer, IPv4, TCP/IP, Wireshark",
        tech_office: "Software Suites",
        tech_office_desc: "Office 365",
        tech_support: "Support",
        tech_support_desc: "Technical assistance and incident management",

        // Langues
        lang_bilingue: "English: Bilingual",

        // Expériences (Version UK)
        exp1_title: "On-site IT Support Technician - Fixed-term Contract",
        exp1_company: "Société Générale, Fontenay-sous-Bois",
        exp1_task1: "Deliver N1/N2 on-site technical support to a user base of over 50 employees.",
        exp1_task2: "Manage and prioritize workstation incidents and requests via the ticketing tool.",
        exp1_task3: "Install, configure, and connect peripheral equipment and workstations.",
        exp1_task4: "Draft technical documentation and ensure the traceability of interventions.",

        exp2_title: "Web Developer - Internship (6 weeks)",
        exp2_company: "CAPAUTO, Drancy",
        exp2_task1: "Design a showcase website using HTML, CSS, and JavaScript, while respecting the specifications.",
        exp2_task2: "Optimize the responsive display and the website interface.",
        exp2_task3: "Contribute to Search Engine Optimization (SEO).",
        exp2_task4: "Test and correct errors to improve loading performance.",

        exp3_title: "IT Technician - Internship (5 weeks)",
        exp3_company: "GEODEAL, Bondy",
        exp3_task1: "Reinstall and deploy the Windows operating system on a batch of user workstations.",
        exp3_task2: "Disassemble, clean, and maintain the central processing units (or desktop towers).",
        exp3_task3: "Configure and master the Surface Pro tablets.",

        // Formations
        form1_title: " Higher National Diploma (IT Services and Infrastructure) - SpecializaEon in Infrastructure, Systems, and Network Solutions -  BTS SIO option SISR - Apprenticeship",
        form1_location: "IFFP, Nanterre",
        form2_title: "Higher National Diploma (Digital Systems - Networks) - BTS Systèmes Numériques option IR",
        form2_location: "Lycée Le Corbusier, Aubervilliers (Not completed)",
        form3_title: "Level 3 National Diploma (BTEC) Digital Systems - (Bac Professionnel Systèmes Numériques)",
        form3_location: "Lycée Alfred Costes, Bobigny",

        // Intérêts
        int_vg: "Video Games: Strategy development, team spirit (online).",
        int_muscu: "Bodybuilding: Regular practice.",

        // Pied de page
        footer_note: "Chathulan JEGATHEESWARAN Portfolio | © 2025",
        
        // Nom du lien de téléchargement
        cv_text: "Resume",
    }
};

// Récupérer la langue mémorisée, sinon utiliser 'fr'
let currentLang = localStorage.getItem('userLang') || 'fr';

// Fonction principale pour appliquer la traduction
function applyTranslation(lang) {
    const texts = translations[lang];
    if (!texts) return;

    // 1. Mise à jour de la Balise Title et de la langue HTML
    document.title = texts.title;
    document.documentElement.lang = lang;

    // 2. Mise à jour du Header et du sous-titre
    document.querySelector('header h1').textContent = translations.fr.title; // Nom complet reste en FR
    document.querySelector('.subtitle').textContent = texts.subtitle;
    
    // Mise à jour du lien de téléchargement du CV (CHEMIN RELATIF)
    const cvLink = document.querySelector('.cv-download-link');
    if (cvLink) {
        // Assurez-vous que les fichiers existent
        const fileName = (lang === 'en') ? 'IFFP_Chathulan JEGATHEESWARAN_IT Support Technician - English.pdf' : 'IFFP_Chathulan JEGATHEESWARAN_Technicien Support IT.pdf';
        cvLink.setAttribute('href', fileName);
        
        // Mise à jour du texte du lien (ex: CV ou Resume)
        const linkTextNode = cvLink.childNodes[1]; // Le nœud de texte après l'icône
        if (linkTextNode && linkTextNode.nodeType === 3) { // Vérifie si c'est bien un nœud de texte
            linkTextNode.nodeValue = ' ' + texts.cv_text; // Ajoute un espace avant le texte
        }
    }


    // 3. Mise à jour de la Navigation
    document.querySelector('nav a[href="#profil"]').textContent = texts.nav_profil;
    document.querySelector('nav a[href="#competences"]').textContent = texts.nav_competences;
    document.querySelector('nav a[href="#experiences"]').textContent = texts.nav_experiences;
    document.querySelector('nav a[href="#formations"]').textContent = texts.nav_formations;
    document.querySelector('nav a[href="#language-section"]').textContent = texts.nav_langues;
    document.querySelector('nav a[href="#interets"]').textContent = texts.nav_interets;
    document.querySelector('nav a[href="#contact"]').textContent = texts.nav_contact;

    // 4. Mise à jour des Titres de Section (H2)
    document.querySelector('#profil h2').textContent = texts.sec_profil;
    document.querySelector('#competences h2').textContent = texts.sec_competences;
    document.querySelector('#experiences h2').textContent = texts.sec_experiences;
    document.querySelector('#formations h2').textContent = texts.sec_formations;
    document.querySelector('#language-section h2').textContent = texts.sec_langues;
    document.querySelector('#interets h2').textContent = texts.sec_interets;
    document.querySelector('#contact h2').textContent = texts.sec_contact;

    // 5. Mise à jour du Profil
    const profileParas = document.querySelectorAll('#profil .profile-card p');
    if (profileParas.length >= 1) profileParas[0].textContent = texts.profil_p1;
    if (profileParas.length >= 2) profileParas[1].textContent = texts.profil_highlight;

    // 6. Mise à jour des Compétences
    document.querySelector('.savoir-etre h3').textContent = texts.soft_skills_title;
    document.querySelector('.savoir-faire-tech h3').textContent = texts.hard_skills_title;

    // Mise à jour des Savoir-Être (Conserver les icônes)
    const softSkillsList = document.querySelectorAll('.savoir-etre ul li');
    if (softSkillsList.length >= 1) softSkillsList[0].innerHTML = '<i class="fas fa-handshake"></i> ' + texts.soft_skills_1;
    if (softSkillsList.length >= 2) softSkillsList[1].innerHTML = '<i class="fas fa-users"></i> ' + texts.soft_skills_2;
    if (softSkillsList.length >= 3) softSkillsList[2].innerHTML = '<i class="fas fa-brain"></i> ' + texts.soft_skills_3;
    if (softSkillsList.length >= 4) softSkillsList[3].innerHTML = '<i class="fas fa-check-double"></i> ' + texts.soft_skills_4;
    if (softSkillsList.length >= 5) softSkillsList[4].innerHTML = '<i class="fas fa-user-tie"></i> ' + texts.soft_skills_5;

    // Mise à jour des Savoir-Faire (DT et DD)
    const techDt = document.querySelectorAll('.savoir-faire-tech dt');
    const techDd = document.querySelectorAll('.savoir-faire-tech dd');

    if (techDt.length >= 1) techDt[0].textContent = texts.tech_os;
    if (techDd.length >= 1) techDd[0].textContent = texts.tech_os_desc;
    if (techDt.length >= 2) techDt[1].textContent = texts.tech_prog;
    if (techDd.length >= 2) techDd[1].textContent = texts.tech_prog_desc;
    if (techDt.length >= 3) techDt[2].textContent = texts.tech_db;
    if (techDd.length >= 3) techDd[2].textContent = texts.tech_db_desc;
    if (techDt.length >= 4) techDt[3].textContent = texts.tech_ticket;
    if (techDd.length >= 4) techDd[3].textContent = texts.tech_ticket_desc;
    if (techDt.length >= 5) techDt[4].textContent = texts.tech_network;
    if (techDd.length >= 5) techDd[4].textContent = texts.tech_network_desc;
    if (techDt.length >= 6) techDt[5].textContent = texts.tech_office;
    if (techDd.length >= 6) techDd[5].textContent = texts.tech_office_desc;

    // 7. Mise à jour des Langues
    document.querySelector('#language-section .language-item p').textContent = texts.lang_bilingue;

    // 8. Mise à jour des Expériences
    const expItems = document.querySelectorAll('.experience-item');
    if (expItems.length >= 1) {
        expItems[0].querySelector('h3').textContent = texts.exp1_title;
        expItems[0].querySelector('.company').textContent = texts.exp1_company;
        const tasks = expItems[0].querySelectorAll('.details-content li');
        if (tasks.length >= 1) tasks[0].textContent = texts.exp1_task1;
        if (tasks.length >= 2) tasks[1].textContent = texts.exp1_task2;
        if (tasks.length >= 3) tasks[2].textContent = texts.exp1_task3;
        if (tasks.length >= 4) tasks[3].textContent = texts.exp1_task4;
    }

    if (expItems.length >= 2) {
        expItems[1].querySelector('h3').textContent = texts.exp2_title;
        expItems[1].querySelector('.company').textContent = texts.exp2_company;
        const tasks = expItems[1].querySelectorAll('.details-content li');
        if (tasks.length >= 1) tasks[0].textContent = texts.exp2_task1;
        if (tasks.length >= 2) tasks[1].textContent = texts.exp2_task2;
        if (tasks.length >= 3) tasks[2].textContent = texts.exp2_task3;
        if (tasks.length >= 4) tasks[3].textContent = texts.exp2_task4;
    }

    if (expItems.length >= 3) {
        expItems[2].querySelector('h3').textContent = texts.exp3_title;
        expItems[2].querySelector('.company').textContent = texts.exp3_company;
        const tasks = expItems[2].querySelectorAll('.details-content li');
        if (tasks.length >= 1) tasks[0].textContent = texts.exp3_task1;
        if (tasks.length >= 2) tasks[1].textContent = texts.exp3_task2;
        if (tasks.length >= 3) tasks[2].textContent = texts.exp3_task3;
    }

    // 9. Mise à jour des Formations
    const formItems = document.querySelectorAll('.formation-item');
    if (formItems.length >= 1) {
        formItems[0].querySelector('h4').textContent = texts.form1_title;
        formItems[0].querySelector('p:last-child').textContent = texts.form1_location;
    }
    if (formItems.length >= 2) {
        formItems[1].querySelector('h4').textContent = texts.form2_title;
        formItems[1].querySelector('p:last-child').textContent = texts.form2_location;
    }
    if (formItems.length >= 3) {
        formItems[2].querySelector('h4').textContent = texts.form3_title;
        formItems[2].querySelector('p:last-child').textContent = texts.form3_location;
    }

    // 10. Mise à jour des Intérêts (Conserver les icônes)
    const interetItems = document.querySelectorAll('.interet-list li');
    if (interetItems.length >= 1) interetItems[0].innerHTML = '<i class="fas fa-gamepad"></i> ' + texts.int_vg;
    if (interetItems.length >= 2) interetItems[1].innerHTML = '<i class="fas fa-dumbbell"></i> ' + texts.int_muscu;

    // 11. Mise à jour du Footer
    document.querySelector('.footer-note').textContent = texts.footer_note;
}

// Fonction appelée par le sélecteur de langue dans HTML
function setLanguage(langCode) {

    // Mémoriser le choix de l'utilisateur dans localStorage
    localStorage.setItem('userLang', langCode);

    currentLang = langCode;
    let flagCode = (langCode === 'en') ? 'gb' : 'fr';
    let displayCode = (langCode === 'en') ? 'En' : 'Fr'; // Code plus court pour l'affichage

    // Mise à jour de l'affichage dans le dropdown (drapeau et code)
    document.getElementById('current-lang-code').textContent = displayCode;

    const currentFlagElement = document.querySelector('.current-lang .flag-icon');
    // Mettre à jour la classe du drapeau
    currentFlagElement.classList.forEach(cls => {
        if (cls.startsWith('flag-icon-')) {
            currentFlagElement.classList.remove(cls);
        }
    });
    currentFlagElement.classList.add(`flag-icon-${flagCode}`);

    // Fermer le menu
    document.getElementById('lang-options').classList.remove('show');

    // Appliquer la traduction
    applyTranslation(langCode);
}

// Appliquer la langue mémorisée au chargement de la page
document.addEventListener('DOMContentLoaded', () => {
    // Appelle setLanguage() pour charger la langue mémorisée et mettre à jour l'interface
    // Ceci s'exécutera au lieu du simple applyTranslation pour gérer aussi l'affichage du drapeau
    setLanguage(currentLang);
});

// Les fonctions de défilement et de dropdown qui étaient dans l'HTML doivent rester dans la balise <script> de l'HTML
// MAIS nous les copions ici pour la clarté si vous souhaitez externaliser tout le JS.
/*
function scrollToSection(id) {
    const element = document.getElementById(id);
    if (element) {
        element.scrollIntoView({ behavior: 'smooth' });
    }
}

function toggleLangDropdown() {
    document.getElementById('lang-options').classList.toggle('show');
}

window.onclick = function(event) {
    if (!event.target.closest('#lang-selector')) {
        const dropdowns = document.getElementsByClassName('lang-options');
        for (let i = 0; i < dropdowns.length; i++) {
            const openDropdown = dropdowns[i];
            if (openDropdown.classList.contains('show')) {
                openDropdown.classList.remove('show');
            }
        }
    }
}
*/
